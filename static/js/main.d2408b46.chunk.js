(this.webpackJsonpbookshop=this.webpackJsonpbookshop||[]).push([[0],{20:function(e,t,n){e.exports={addCountWrapper:"styles_addCountWrapper__3a2ef",fieldGroup:"styles_fieldGroup__3XffH",buttonGroup:"styles_buttonGroup__Amdcq"}},21:function(e,t,n){e.exports={cardStyle:"styles_cardStyle__2nyrP",cardDesc:"styles_cardDesc__2m4td",cardImage:"styles_cardImage__29tA8",cardText:"styles_cardText__1Cddn"}},24:function(e,t,n){e.exports={cardStyle:"styles_cardStyle__1PKdQ",cardBodyStyle:"styles_cardBodyStyle__19sXp",image:"styles_image__2-bU1",priceSection:"styles_priceSection__1Un_p"}},25:function(e,t,n){e.exports={wrapper:"styles_wrapper__UDYgX",wrapperHeader:"styles_wrapperHeader__1fejE",wrapperChildren:"styles_wrapperChildren__2no72"}},29:function(e,t,n){e.exports={formGroup:"styles_formGroup__2mrXO",formControl:"styles_formControl__HX8Wy",feedback:"styles_feedback__weaFQ"}},35:function(e,t,n){e.exports={booksWrapper:"styles_booksWrapper__4GzyR",boxGroup:"styles_boxGroup__2c4rm"}},36:function(e,t,n){e.exports={cartTable:"styles_cartTable__5VVaG",totalPriceInfo:"styles_totalPriceInfo__1nVQG"}},37:function(e,t,n){e.exports={cartWrapper:"styles_cartWrapper__1Ja3j",btnWrapper:"styles_btnWrapper__esmfq"}},38:function(e,t,n){e.exports={errorTemplate:"styles_errorTemplate__1Tbur",imageStyle:"styles_imageStyle__3Tt_g"}},39:function(e,t,n){e.exports={formContainer:"styles_formContainer__1h8pe",picLogin:"styles_picLogin__2byX-"}},40:function(e,t,n){e.exports={navbarItem:"styles_navbarItem__1F38W",avatarImage:"styles_avatarImage__3cirl"}},54:function(e,t,n){e.exports={loader:"styles_loader__3MoQ3"}},55:function(e,t,n){e.exports={priceSelect:"styles_priceSelect__3mTDe"}},56:function(e,t,n){e.exports={wrapper:"styles_wrapper__2q59k"}},57:function(e,t,n){e.exports={buttonGroup:"styles_buttonGroup__qaf8Q"}},58:function(e,t,n){e.exports={bookDetailsWrapper:"styles_bookDetailsWrapper__1UunF"}},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(18),s=n.n(c),o=n(7),i=n(3),l=n(17),u=n(51),d="SHOW_ALERT",j="HIDE_ALERT",b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.payload;case j:return null;default:return e}},p=n(2),O="BOOKS_GET_REQUEST",f="BOOKS_GET_SUCCESS",m="BOOKS_GET_FAIL",h="BOOK_SEARCH",x="BOOK_FILTER_BY_PRICE",g={books:[],filteredBooks:null,textValue:null,loading:!1,error:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case f:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,books:t.payload,error:null});case h:return Object(p.a)(Object(p.a)({},e),{},{textValue:t.payload,filteredBooks:""===t.payload?null:e.books.filter((function(e){var n=new RegExp("".concat(t.payload),"gi");return e.title.match(n)}))});case x:return Object(p.a)(Object(p.a)({},e),{},{filteredBooks:e.textValue?e.books.filter((function(t){var n=new RegExp("".concat(e.textValue),"gi");return t.title.match(n)})).filter(t.payload):0===t.data?null:e.books.filter(t.payload)});case m:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:t.payload,books:[],filteredBooks:null});default:return e}},y=n(59),_="CART_ADD_REQUEST",k="CART_ADD_BOOK",N="CART_CLEAR",S={cartItems:[],loading:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case k:var n=t.payload,a=e.cartItems.find((function(e){return e.id===n.id}));return a?Object(p.a)(Object(p.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.id===a.id?n:e})),loading:!1}):Object(p.a)(Object(p.a)({},e),{},{cartItems:[].concat(Object(y.a)(e.cartItems),[n]),loading:!1});case N:return Object(p.a)(Object(p.a)({},e),{},{cartItems:[],loading:!1});default:return e}},I="MODAL_OPEN",C="MODAL_CLOSE",T={open:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(p.a)(Object(p.a)({},e),{},{open:!0});case C:return Object(p.a)(Object(p.a)({},e),{},{open:!1});default:return e}},B="ORDER_CREATE_REQUEST",R="ORDER_CREATE_SUCCESS",L="ORDER_CREATE_FAIL",D="ORDER_RESET",G={message:null,error:null,loading:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case R:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,message:t.payload,error:null});case L:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,message:null,error:t.payload});case D:return G;default:return e}},A="USER_LOGIN_REQUEST",F="USER_LOGIN_SUCCESS",P="USER_LOGIN_FAIL",W="USER_LOGOUT",q="USER_LOGOUT_REQUEST",V={loading:!1,userInfo:null,error:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:case A:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case F:return Object(p.a)(Object(p.a)({},e),{},{userInfo:t.payload,error:null,loading:!1});case P:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload,userInfo:null,loading:!1});case W:return V;default:return e}},Q="BOOK_GET_BY_ID_REQUEST",K="BOOK_GET_BY_ID_SUCCESS",X="BOOK_GET_BY_ID_FAIL",J={book:null,loading:!1,error:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case K:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,book:t.payload,error:null});case X:return Object(p.a)(Object(p.a)({},e),{},{book:null,loading:!1,error:t.payload});default:return e}},z=Object(l.c)({userLogin:H,books:v,currentBook:M,cart:E,modal:w,order:U,alert:b}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:l.d,$={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]}},Z=[u.a],ee=Object(l.e)(z,$,Y(l.a.apply(void 0,Z))),te=function(e){return e.userLogin.userInfo},ne=function(e){return e.userLogin.loading},ae=function(e){return e.userLogin.error},re=n(0),ce={width:"100%",position:"absolute",top:0,left:0,zIndex:999},se=function(e){var t=e.title,n=e.type;return Object(re.jsx)("div",{className:"alert alert-".concat(n),style:ce,children:t})};se.defaultProps={type:"danger"};var oe,ie=se,le=function(e){return e.alert},ue=n(5),de=function(){return{type:j}},je=function(e){return{type:d,payload:e}},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return function(n){n(je(e)),setTimeout((function(){n(de())}),t)}},pe=n(6),Oe=n.n(pe),fe=n(12),me=n(52),he=n(53),xe=n(28),ge=n.n(xe),ve=n(19),ye="signin",_e="books",ke="purchase",Ne=(oe={},Object(ve.a)(oe,ye,"/signin"),Object(ve.a)(oe,_e,"/books"),Object(ve.a)(oe,ke,"/purchase"),oe),Se=new(function(){function e(t,n){if(Object(me.a)(this,e),e.isExist)return e.instance;e.instance=this,e.isExist=!0,this.endpoints=n,this.baseUrl=t}return Object(he.a)(e,[{key:"getData",value:function(){var e=Object(fe.a)(Oe.a.mark((function e(t,n){var a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(this.baseUrl).concat(this.endpoints[t]),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDataById",value:function(){var e=Object(fe.a)(Oe.a.mark((function e(t,n,a){var r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(this.baseUrl).concat(this.endpoints[t],"/").concat(n),a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e=Object(fe.a)(Oe.a.mark((function e(t,n,a){var r,c,s;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-type":"application/json"}},c=Object(p.a)(Object(p.a)({},a),{},{config:r}),e.next=4,ge.a.post("".concat(this.baseUrl).concat(this.endpoints[t]),n,c);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}())("https://js-band-store-api.glitch.me",Ne),Ee=function(e){switch(e){case 1:return function(e){return e.price>0&&e.price<=25};case 2:return function(e){return e.price>25&&e.price<=50};case 3:return function(e){return e.price>50};default:return function(e){return e}}},Ie=function(e){return{type:f,payload:e}},Ce=function(e){return function(t){var n=Ee(+e);t(function(e,t){return{type:x,payload:t,data:+e}}(e,n))}},Te=function(e){return e.books.books},we=function(e){return e.books.textValue},Be=function(e){return e.books.filteredBooks},Re=function(e){return e.books.loading},Le=function(e){return e.books.error},De=n(13),Ge=n.n(De),Ue=n(24),Ae=n.n(Ue),Fe=function(e){var t=e.title,n=e.author,a=e.price,r=e.cover,c=e.id;return Object(re.jsxs)("div",{className:Ge()("card py-2",Ae.a.cardStyle),children:[Object(re.jsx)("img",{className:Ae.a.image,src:r,alt:"Card cap"}),Object(re.jsxs)("div",{className:Ge()("card-body",Ae.a.cardBodyStyle),children:[Object(re.jsx)("h5",{className:"card-title",children:t}),Object(re.jsx)("p",{className:"card-text",children:n}),Object(re.jsxs)("p",{className:Ge()("card-text",Ae.a.priceSection),children:[a," $"," ",Object(re.jsx)(o.b,{to:"/books/".concat(c),className:"btn btn-info",children:"View"})]})]})]})},Pe=n(54),We=n.n(Pe),qe=function(){return Object(re.jsx)("div",{className:We.a.loader,children:Object(re.jsx)("div",{className:"spinner-border text-info ",role:"status",children:Object(re.jsx)("span",{className:"sr-only",children:"Loading..."})})})},Ve=n(29),He=n.n(Ve),Qe=function(e){var t=e.submitSearchHandler;return Object(re.jsxs)("div",{className:He.a.formGroup,children:[Object(re.jsx)("span",{className:Ge()("fa fa-search",He.a.feedback)}),Object(re.jsx)("input",{className:He.a.formControl,type:"text",placeholder:"Search","aria-label":"Search",onChange:function(e){e.preventDefault(),t(e.target.value)}})]})},Ke=n(15),Xe=n(55),Je=n.n(Xe),Me=function(e){var t=e.filterHandler,n=e.textValue,r=Object(a.useState)(0),c=Object(Ke.a)(r,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){o(0)}),[n]),Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("select",{className:Ge()("form-select",Je.a.priceSelect),value:s,onChange:function(e){!function(e){o(e.target.value),t(e.target.value)}(e)},children:[Object(re.jsx)("option",{defaultValue:!0,value:"0",children:"Price"}),Object(re.jsx)("option",{value:"1",children:" < 25"}),Object(re.jsx)("option",{value:"2",children:"25 - 50"}),Object(re.jsx)("option",{value:"3",children:"50 +"})]})})};Me.defaultProps={textValue:""};var ze=Me,Ye=n(35),$e=n.n(Ye),Ze=function(){var e=Object(i.b)(),t=Object(i.c)(Te),n=Object(i.c)(Re),r=Object(i.c)(Le),c=Object(i.c)(Be),s=Object(i.c)(we);Object(a.useEffect)((function(){r&&e(be({title:r}))}),[r]);var o=c||t;return Object(a.useEffect)((function(){e(function(){var e=Object(fe.a)(Oe.a.mark((function e(t,n){var a,r,c,s;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O}),e.prev=1,a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Se.getData(_e,c);case 6:s=e.sent,t(Ie(s)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t((o=e.t0,{type:m,payload:o.response&&o.response.data.message?o.response.data.message:o.message}));case 13:case"end":return e.stop()}var o}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]),n?Object(re.jsx)(qe,{}):Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsxs)("div",{className:$e.a.boxGroup,children:[Object(re.jsx)(Qe,{submitSearchHandler:function(t){e(function(e){return{type:h,payload:e.trim()}}(t))}}),Object(re.jsx)(ze,{filterHandler:function(t){e(Ce(t))},textValue:s})]}),Object(re.jsx)("div",{className:$e.a.booksWrapper,children:o&&o.length>0?o.map((function(e){return Object(re.jsx)(Fe,{id:e.id,title:e.title,author:e.author,price:e.price,cover:e.cover},e.id)})):o&&Object(re.jsx)("h5",{children:"Books Not found..."})})]})})},et=function(e){return e.cart.cartItems},tt=function(e){return e.cart.loading},nt=function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)},at=function(e){return Number(e.price*e.quantity).toFixed(2)},rt=n(36),ct=n.n(rt),st=function(e){var t=e.cartItems,n=nt(t);return Object(re.jsxs)("div",{className:ct.a.cartTable,children:[Object(re.jsxs)("table",{className:"table table-striped table-bordered mt-3",children:[Object(re.jsx)("thead",{children:Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{children:"Name"}),Object(re.jsx)("th",{children:"Count"}),Object(re.jsx)("th",{children:"Price"}),Object(re.jsx)("th",{children:"Total"})]})}),Object(re.jsx)("tbody",{children:t.map((function(e){return Object(re.jsxs)("tr",{children:[Object(re.jsx)("td",{children:e.title}),Object(re.jsxs)("td",{children:[" ",e.quantity]}),Object(re.jsxs)("td",{children:[" ",e.price]}),Object(re.jsx)("td",{children:at(e)})]},e.id)}))})]}),Object(re.jsxs)("div",{className:ct.a.totalPriceInfo,children:["Total Price: ",n," $"]})]})},ot=function(e){var t=e.title,n=e.disabled,r=e.extraClassName,c=e.onClick,s=Object(a.useMemo)((function(){return Ge()("btn",r,{"btn-disabled":n})}),[n,r]);return Object(re.jsx)("button",{type:"button",disabled:n,className:s,onClick:c,children:t})};ot.defaultProps={title:"Button",disabled:!1,extraClassName:"btn"};var it=ot,lt=function(e){return e.modal.open},ut=n(16),dt=n.n(ut),jt=n(56),bt=n.n(jt),pt=function(e){var t=e.children,n=e.className,r=void 0===n?"root-portal":n,s=e.el,o=void 0===s?"div":s,i=Object(a.useState)(document.createElement(o)),l=Object(Ke.a)(i,1)[0];return l.classList.add(r),Object(a.useEffect)((function(){return document.body.appendChild(l),l.setAttribute("class",bt.a.wrapper),document.body.style.overflow="hidden",function(){document.body.removeChild(l),document.body.style.overflow="auto"}}),[l]),Object(c.createPortal)(t,l)};pt.propTypes={el:dt.a.string,className:dt.a.string,children:dt.a.element.isRequired};var Ot=pt,ft=n(25),mt=n.n(ft),ht=function(e){var t=e.title,n=e.children;return Object(re.jsxs)("div",{className:mt.a.wrapper,children:[Object(re.jsx)("div",{className:mt.a.wrapperHeader,children:Object(re.jsx)("h4",{className:mt.a.title,children:t})}),Object(re.jsx)("div",{className:mt.a.wrapperChildren,children:n})]})},xt=n(57),gt=n.n(xt),vt=function(e){var t=e.title,n=e.cartItems,a=e.closeHandler;return Object(re.jsx)(Ot,{children:Object(re.jsxs)(ht,{title:t,children:[Object(re.jsx)(st,{cartItems:n}),Object(re.jsx)("div",{className:gt.a.buttonGroup,children:Object(re.jsx)(it,{title:"Close",extraClassName:"btn-secondary",onClick:a})})]})})},yt=function(e){return function(t,n){t({type:_}),setTimeout((function(){t(function(e){return{type:k,payload:e}}(e)),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems))}),500)}},_t=function(){return function(e){e({type:N}),localStorage.removeItem("cartItems")}},kt=function(){return{type:D}},Nt=function(e){return e.order.message},St=function(e){return e.order.loading},Et=function(e){return e.order.error},It=n(37),Ct=n.n(It),Tt=function(){var e=Object(ue.g)(),t=Object(i.b)(),n=Object(i.c)(lt),r=Object(i.c)(et),c=Object(i.c)(Nt),s=Object(i.c)(St),o=Object(i.c)(Et);Object(a.useEffect)((function(){o&&!s&&t(be({title:o}))}),[o,s]);if(c&&t({type:I}),s)return Object(re.jsx)(qe,{});return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{className:"container",children:[Object(re.jsxs)("div",{className:Ct.a.btnWrapper,children:[Object(re.jsx)(it,{title:"Go back",extraClassName:"btn-info",onClick:function(){return e.goBack()}}),Object(re.jsx)(it,{title:"Purchase",disabled:0===r.length,extraClassName:"btn-info",onClick:function(){var e;t((e=r,function(){var t=Object(fe.a)(Oe.a.mark((function t(n,a){var r,c,s,o,i;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:B}),t.prev=1,r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},o={books:e},t.next=7,Se.postData(ke,o,s);case 7:i=t.sent,n((u=i.message,{type:R,payload:u})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n((l=t.t0,{type:L,payload:l.response&&l.response.data.message?l.response.data.message:l.message}));case 14:case"end":return t.stop()}var l,u}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()))}})]}),r.length>0?Object(re.jsx)(st,{cartItems:r}):Object(re.jsxs)("div",{className:Ct.a.cartWrapper,children:[Object(re.jsx)("i",{className:"fa fa-shopping-cart text-info"}),Object(re.jsx)("h5",{children:"Cart is empty"})]})]}),n&&Object(re.jsx)(vt,{title:c,cartItems:r,closeHandler:function(){t(_t()),t({type:C}),t(kt()),e.push("/")}})]})},wt=function(e){return{type:K,payload:e}},Bt=function(e){return e.currentBook.book},Rt=function(e){return e.currentBook.loading},Lt=function(e){return e.currentBook.error},Dt=n(20),Gt=n.n(Dt),Ut=function(e){var t=e.countInStock,n=e.price,r=e.quantity,c=e.onAddToCartClick,s=Object(a.useState)(r),o=Object(Ke.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(""),d=Object(Ke.a)(u,2),j=d[0],b=d[1],p=Object(a.useState)(at({price:n,quantity:r})),O=Object(Ke.a)(p,2),f=O[0],m=O[1];return Object(re.jsxs)("div",{className:Gt.a.addCountWrapper,children:[j&&Object(re.jsx)("span",{className:"text-danger mb-3 d-block",children:j}),Object(re.jsxs)("div",{className:Gt.a.fieldGroup,children:[Object(re.jsx)("span",{children:"Price, $ "}),Object(re.jsx)("span",{children:n})]}),Object(re.jsxs)("div",{className:Gt.a.fieldGroup,children:[Object(re.jsx)("span",{children:" Count"}),Object(re.jsx)("input",{type:"number",value:i,onChange:function(e){var a,r,c=+e.target.value;(r=t,(a=c)>=0&&a<=r)&&(l(c),m(at({price:n,quantity:c})),b(""));(function(e,t){return e>t})(c,t)&&b("We have only ".concat(t," books in stock"))}})]}),Object(re.jsxs)("div",{className:Gt.a.fieldGroup,children:[Object(re.jsx)("span",{children:"Total Price, $"}),Object(re.jsx)("span",{children:f})]}),Object(re.jsx)("div",{className:Gt.a.buttonGroup,children:Object(re.jsx)(it,{title:"Add To Cart",extraClassName:"btn-info",onClick:function(){return c(i)},disabled:0===i})})]})};Ut.defaultProps={quantity:0};var At=Ut,Ft=n(21),Pt=n.n(Ft),Wt=function(e){var t=e.book;return Object(re.jsxs)("div",{className:Pt.a.cardStyle,children:[Object(re.jsxs)("div",{className:Pt.a.cardDesc,children:[Object(re.jsx)("img",{className:Pt.a.cardImage,src:t.cover,alt:"Card cap"}),Object(re.jsx)("p",{className:Pt.a.cardText,children:t.description})]}),Object(re.jsxs)("div",{className:Ge()("card-body",Pt.a.cardBodyStyle),children:[Object(re.jsx)("h5",{className:"card-title",children:t.title}),Object(re.jsx)("p",{className:"card-text",children:t.author}),Object(re.jsxs)("p",{children:[Object(re.jsx)("i",{className:"fa fa-tags mr-2"}),t.tags.join(", ")]})]})]})},qt=n(58),Vt=n.n(qt),Ht=function(){var e=Object(i.b)(),t=Object(ue.g)(),n=Object(ue.i)(),r=Object(i.c)(Rt),c=Object(i.c)(Lt),s=Object(i.c)(Bt),o=Object(i.c)(tt),l=Object(i.c)(et),u=l&&s&&l.find((function(e){return e.id===s.id}));Object(a.useEffect)((function(){var t;e((t=n.id,function(){var e=Object(fe.a)(Oe.a.mark((function e(n,a){var r,c,s,o;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:Q}),e.prev=1,r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Se.getDataById(_e,t,s);case 6:o=e.sent,n(wt(o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n((i=e.t0,{type:X,payload:i.response&&i.response.data.message?i.response.data.message:i.message}));case 13:case"end":return e.stop()}var i}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()))}),[]),Object(a.useEffect)((function(){c&&e(be({title:c}))}),[c]);return r?Object(re.jsx)(qe,{}):s&&Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsx)(it,{title:"Go back",extraClassName:"btn-info",onClick:function(){return t.goBack()}}),Object(re.jsxs)("div",{className:Vt.a.bookDetailsWrapper,children:[Object(re.jsx)(Wt,{book:s}),Object(re.jsx)(re.Fragment,{children:o?Object(re.jsx)(qe,{}):Object(re.jsx)(At,{countInStock:s.count,price:s.price,quantity:u&&u.quantity,onAddToCartClick:function(t){e(yt(Object(p.a)(Object(p.a)({},s),{},{quantity:t}))),setTimeout((function(){e(be({title:"Your order successfully added to the cart!",type:"success"}))}),500)}})})]})]})})},Qt=n.p+"static/media/cat.37830ce8.jfif",Kt=n(38),Xt=n.n(Kt),Jt=function(){var e=Object(ue.g)();return Object(re.jsxs)("div",{className:Xt.a.errorTemplate,children:[Object(re.jsx)("img",{src:Qt,alt:"Not found",className:Xt.a.imageStyle}),Object(re.jsx)("h1",{children:"404"}),Object(re.jsx)("h3",{children:"Sorry, that page does not exist"}),Object(re.jsx)(it,{title:"Take me home",extraClassName:"btn-info mt-3",onClick:function(){e.push("/")}})]})},Mt=n.p+"static/media/login_pic.38f6836f.jpg",zt=function(e){return e.length<4||e.length>16},Yt=n(39),$t=n.n(Yt),Zt=function(e){var t=e.onLoginSubmit,n=Object(a.useState)(""),r=Object(Ke.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),i=Object(Ke.a)(o,2),l=i[0],u=i[1];return Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:$t.a.formContainer,children:Object(re.jsxs)("form",{onSubmit:function(e){e.preventDefault(),zt(c)?u(!0):(t(c),s(""),u(!1))},children:[" ",Object(re.jsx)("img",{src:Mt,alt:"Login avatar",className:$t.a.picLogin}),Object(re.jsxs)("h4",{className:"text-center",children:[Object(re.jsx)("span",{className:"text-info",children:"JS Band"})," Store"]}),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsxs)("label",{htmlFor:"username",className:"w-100",children:["Name",Object(re.jsx)("input",{type:"text",name:"username",id:"username",value:c,className:"form-control w-100",onChange:function(e){return s(e.target.value)}}),l&&Object(re.jsx)("small",{className:"text-danger",children:"Username is not valid"})]})}),Object(re.jsx)("input",{type:"submit",value:"Login",className:"btn btn-block btn-info"})]})})})},en=function(e){return{type:F,payload:e}},tn=function(e){return function(){var t=Object(fe.a)(Oe.a.mark((function t(n){var a,r;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:A}),t.prev=1,a={username:e},t.next=5,Se.postData(ye,a);case 5:r=t.sent,n(en(r)),localStorage.setItem("userInfo",JSON.stringify(r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n((c=t.t0,{type:P,payload:c.response&&c.response.data.message?c.response.data.message:c.message}));case 13:case"end":return t.stop()}var c}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},nn=function(){return function(e){e({type:q}),setTimeout((function(){localStorage.removeItem("userInfo"),e({type:W})}),500)}},an=function(){var e=Object(i.b)(),t=Object(ue.g)(),n=Object(i.c)(te),r=Object(i.c)(ne),c=Object(i.c)(ae);Object(a.useEffect)((function(){n&&t.push("/")}),[t,n,tn,c]),Object(a.useEffect)((function(){c&&e(be({title:c}))}),[c]);return r?Object(re.jsx)(qe,{}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(Zt,{onLoginSubmit:function(t){e(tn(t))}})})},rn=n(40),cn=n.n(rn),sn=function(e){var t=e.avatar,n=e.username,a=e.onLogoutClicked,r=e.cartItemsSum,c=void 0===r?0:r;return Object(re.jsxs)("header",{children:[Object(re.jsx)("nav",{className:"navbar  navbar-expand-lg ",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:cn.a.navbarItem,children:[Object(re.jsx)("span",{children:n}),Object(re.jsx)("img",{src:t,alt:"avatar",className:cn.a.avatarImage}),Object(re.jsx)(it,{title:"Sign Out",extraClassName:"btn-secondary py-2 ml-3",onClick:function(){return a()}})]})})}),Object(re.jsx)("div",{className:"navbar navbar-dark bg-info navbar-expand-lg mb-3 py-3",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsxs)(o.b,{to:"/",children:[Object(re.jsx)("i",{className:"fa fa-book"})," JS Band Store"]}),Object(re.jsxs)(o.b,{to:"/cart",children:[Object(re.jsx)("i",{className:"fa fa-shopping-cart"})," Cart (",c,")"]})]})})]})},on=function(e){return e.reduce((function(e,t){return e+t.quantity}),0)},ln=function(){var e=Object(i.b)(),t=Object(i.c)(te),n=Object(ue.g)(),a=Object(i.c)(et),r=on(a);return Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(sn,{username:t.username,avatar:t.avatar,onLogoutClicked:function(){e(nn()),e(kt()),n.push("/login")},cartItemsSum:r})})},un=Object.freeze({books:"/",book:"/books/:id",login:"/login",cart:"/cart",notFound:"*"}),dn=function(){return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(ue.d,{children:[Object(re.jsx)(ue.b,{exact:!0,path:"/404",component:Jt}),Object(re.jsxs)(ue.b,{children:[Object(re.jsx)(ln,{}),Object(re.jsxs)(ue.d,{children:[Object(re.jsx)(ue.b,{exact:!0,path:un.books,component:Ze}),Object(re.jsx)(ue.b,{path:un.login,component:an}),Object(re.jsx)(ue.b,{path:un.book,component:Ht}),Object(re.jsx)(ue.b,{path:un.cart,component:Tt}),Object(re.jsx)(ue.a,{to:"/404"})]})]})]})})},jn=function(){var e=Object(ue.h)().pathname;return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(ue.d,{children:[Object(re.jsx)(ue.b,{path:un.login,component:an}),"/"===e&&Object(re.jsx)(ue.a,{to:un.login}),Object(re.jsx)(ue.b,{path:un.notFound,component:Jt})]})})},bn=function(){var e=Object(i.c)(te),t=Object(i.c)(le);return Object(re.jsxs)(re.Fragment,{children:[t&&Object(re.jsx)(ie,{title:t.title,type:t.type}),e?Object(re.jsx)(dn,{}):Object(re.jsx)(jn,{})]})};n(89);s.a.render(Object(re.jsx)(r.a.StrictMode,{children:Object(re.jsx)(i.a,{store:ee,children:Object(re.jsx)(o.a,{children:Object(re.jsx)(bn,{})})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.d2408b46.chunk.js.map