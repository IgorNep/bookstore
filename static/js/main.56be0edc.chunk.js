(this.webpackJsonpbookshop=this.webpackJsonpbookshop||[]).push([[0],{17:function(e,t,n){e.exports={addCountWrapper:"styles_addCountWrapper__3a2ef",fieldGroup:"styles_fieldGroup__3XffH",buttonGroup:"styles_buttonGroup__Amdcq",inputGroup:"styles_inputGroup__2Fz7C",countBtn:"styles_countBtn__3g15A"}},21:function(e,t,n){e.exports={cardStyle:"styles_cardStyle__2nyrP",cardDesc:"styles_cardDesc__2m4td",cardImage:"styles_cardImage__29tA8",cardText:"styles_cardText__1Cddn"}},24:function(e,t,n){e.exports={cardStyle:"styles_cardStyle__1PKdQ",cardBodyStyle:"styles_cardBodyStyle__19sXp",image:"styles_image__2-bU1",priceSection:"styles_priceSection__1Un_p"}},25:function(e,t,n){e.exports={wrapper:"styles_wrapper__UDYgX",wrapperHeader:"styles_wrapperHeader__1fejE",wrapperChildren:"styles_wrapperChildren__2no72"}},29:function(e,t,n){e.exports={formGroup:"styles_formGroup__2mrXO",formControl:"styles_formControl__HX8Wy",feedback:"styles_feedback__weaFQ"}},35:function(e,t,n){e.exports={booksWrapper:"styles_booksWrapper__4GzyR",boxGroup:"styles_boxGroup__2c4rm"}},36:function(e,t,n){e.exports={cartTable:"styles_cartTable__5VVaG",totalPriceInfo:"styles_totalPriceInfo__1nVQG"}},37:function(e,t,n){e.exports={cartWrapper:"styles_cartWrapper__1Ja3j",btnWrapper:"styles_btnWrapper__esmfq"}},38:function(e,t,n){e.exports={errorTemplate:"styles_errorTemplate__1Tbur",imageStyle:"styles_imageStyle__3Tt_g"}},39:function(e,t,n){e.exports={formContainer:"styles_formContainer__1h8pe",picLogin:"styles_picLogin__2byX-"}},40:function(e,t,n){e.exports={navbarItem:"styles_navbarItem__1F38W",avatarImage:"styles_avatarImage__3cirl"}},54:function(e,t,n){e.exports={loader:"styles_loader__3MoQ3"}},55:function(e,t,n){e.exports={priceSelect:"styles_priceSelect__3mTDe"}},56:function(e,t,n){e.exports={wrapper:"styles_wrapper__2q59k"}},57:function(e,t,n){e.exports={buttonGroup:"styles_buttonGroup__qaf8Q"}},58:function(e,t,n){e.exports={bookDetailsWrapper:"styles_bookDetailsWrapper__1UunF"}},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),o=n(9),i=n(3),l=n(18),u=n(51),d="SHOW_ALERT",j="HIDE_ALERT",b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.payload;case j:return null;default:return e}},p=n(2),O="BOOKS_GET_REQUEST",f="BOOKS_GET_SUCCESS",m="BOOKS_GET_FAIL",h="BOOK_SEARCH",x="BOOK_FILTER_BY_PRICE",v="BOOKS_CLEAR",y={books:[],filteredBooks:null,textValue:null,loading:!1,error:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case f:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,books:t.payload,error:null});case h:return Object(p.a)(Object(p.a)({},e),{},{textValue:t.payload,filteredBooks:""===t.payload?null:e.books.filter((function(e){var n=new RegExp("".concat(t.payload),"gi");return e.title.match(n)}))});case x:return Object(p.a)(Object(p.a)({},e),{},{filteredBooks:e.textValue?e.books.filter((function(t){var n=new RegExp("".concat(e.textValue),"gi");return t.title.match(n)})).filter(t.payload):0===t.data?null:e.books.filter(t.payload)});case m:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:t.payload,books:[],filteredBooks:null});case v:return y;default:return e}},_=n(59),k="CART_ADD_REQUEST",N="CART_ADD_BOOK",S="CART_CLEAR",C={cartItems:[],loading:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case N:var n=t.payload,a=e.cartItems.find((function(e){return e.id===n.id}));return a?Object(p.a)(Object(p.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.id===a.id?n:e})),loading:!1}):Object(p.a)(Object(p.a)({},e),{},{cartItems:[].concat(Object(_.a)(e.cartItems),[n]),loading:!1});case S:return Object(p.a)(Object(p.a)({},e),{},{cartItems:[],loading:!1});default:return e}},I="MODAL_OPEN",T="MODAL_CLOSE",w={open:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(p.a)(Object(p.a)({},e),{},{open:!0});case T:return Object(p.a)(Object(p.a)({},e),{},{open:!1});default:return e}},L="ORDER_CREATE_REQUEST",R="ORDER_CREATE_SUCCESS",G="ORDER_CREATE_FAIL",D="ORDER_RESET",A={message:null,error:null,loading:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case R:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,message:t.payload,error:null});case G:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,message:null,error:t.payload});case D:return A;default:return e}},F="USER_LOGIN_REQUEST",P="USER_LOGIN_SUCCESS",W="USER_LOGIN_FAIL",q="USER_LOGOUT",V="USER_LOGOUT_REQUEST",H={loading:!1,userInfo:null,error:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:case F:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case P:return Object(p.a)(Object(p.a)({},e),{},{userInfo:t.payload,error:null,loading:!1});case W:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload,userInfo:null,loading:!1});case q:return H;default:return e}},Q="BOOK_GET_BY_ID_REQUEST",X="BOOK_GET_BY_ID_SUCCESS",J="BOOK_GET_BY_ID_FAIL",z={book:null,loading:!1,error:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case X:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,book:t.payload,error:null});case J:return Object(p.a)(Object(p.a)({},e),{},{book:null,loading:!1,error:t.payload});default:return e}},Y=Object(l.c)({userLogin:K,books:g,currentBook:M,cart:E,modal:B,order:U,alert:b}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:l.d,Z={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]}},ee=[u.a],te=Object(l.e)(Y,Z,$(l.a.apply(void 0,ee))),ne=function(e){return e.userLogin.userInfo},ae=function(e){return e.userLogin.loading},re=function(e){return e.userLogin.error},ce=n(0),se={width:"100%",position:"fixed",top:0,left:0,zIndex:999},oe=function(e){var t=e.title,n=e.type;return Object(ce.jsx)("div",{className:"alert alert-".concat(n),style:se,children:t})};oe.defaultProps={type:"danger"};var ie,le=oe,ue=function(e){return e.alert},de=n(5),je=n(7),be=function(){return{type:j}},pe=function(e){return{type:d,payload:e}},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return function(n){n(pe(e)),setTimeout((function(){n(be())}),t)}},fe=n(6),me=n.n(fe),he=n(14),xe=n(52),ve=n(53),ye=n(28),ge=n.n(ye),_e=n(20),ke="signin",Ne="books",Se="purchase",Ce=(ie={},Object(_e.a)(ie,ke,"/signin"),Object(_e.a)(ie,Ne,"/books"),Object(_e.a)(ie,Se,"/purchase"),ie),Ee=new(function(){function e(t,n){if(Object(xe.a)(this,e),e.isExist)return e.instance;e.instance=this,e.isExist=!0,this.endpoints=n,this.baseUrl=t}return Object(ve.a)(e,[{key:"getData",value:function(){var e=Object(he.a)(me.a.mark((function e(t,n){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(this.baseUrl).concat(this.endpoints[t]),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDataById",value:function(){var e=Object(he.a)(me.a.mark((function e(t,n,a){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(this.baseUrl).concat(this.endpoints[t],"/").concat(n),a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e=Object(he.a)(me.a.mark((function e(t,n,a){var r,c,s;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-type":"application/json"}},c=Object(p.a)(Object(p.a)({},a),{},{config:r}),e.next=4,ge.a.post("".concat(this.baseUrl).concat(this.endpoints[t]),n,c);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}())("https://js-band-store-api.glitch.me",Ce),Ie=function(e){switch(e){case 1:return function(e){return e.price>0&&e.price<=25};case 2:return function(e){return e.price>25&&e.price<=50};case 3:return function(e){return e.price>50};default:return function(e){return e}}},Te=function(e){return{type:f,payload:e}},we=function(e){return function(t){var n=Ie(+e);t(function(e,t){return{type:x,payload:t,data:+e}}(e,n))}},Be=function(){return{type:v}},Le=function(e){return e.books.books},Re=function(e){return e.books.textValue},Ge=function(e){return e.books.filteredBooks},De=function(e){return e.books.loading},Ae=function(e){return e.books.error},Ue=n(8),Fe=n.n(Ue),Pe=n(24),We=n.n(Pe),qe=function(e){var t=e.title,n=e.author,a=e.price,r=e.cover,c=e.id;return Object(ce.jsxs)("div",{className:Fe()("card py-2",We.a.cardStyle),children:[Object(ce.jsx)("img",{className:We.a.image,src:r,alt:"Card cap"}),Object(ce.jsxs)("div",{className:Fe()("card-body",We.a.cardBodyStyle),children:[Object(ce.jsx)("h5",{className:"card-title",children:t}),Object(ce.jsx)("p",{className:"card-text",children:n}),Object(ce.jsxs)("p",{className:Fe()("card-text",We.a.priceSection),children:[a," $"," ",Object(ce.jsx)(o.b,{to:"/books/".concat(c),className:"btn btn-info",children:"View"})]})]})]})},Ve=n(54),He=n.n(Ve),Ke=function(){return Object(ce.jsx)("div",{className:He.a.loader,children:Object(ce.jsx)("div",{className:"spinner-border text-info ",role:"status",children:Object(ce.jsx)("span",{className:"sr-only",children:"Loading..."})})})},Qe=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){var a=arguments,r=this,c=function(){e.apply(r,a)};clearTimeout(t),t=setTimeout(c,n)}},Xe=n(29),Je=n.n(Xe),ze=function(e){var t=e.submitSearchHandler,n=Object(a.useState)(""),r=Object(je.a)(n,2),c=r[0],s=r[1],o=Object(a.useCallback)(Qe((function(e){return t(e)}),1e3),[]);return Object(ce.jsxs)("div",{className:Je.a.formGroup,children:[Object(ce.jsx)("span",{className:Fe()("fa fa-search",Je.a.feedback)}),Object(ce.jsx)("input",{className:Je.a.formControl,type:"text",value:c,placeholder:"Search","aria-label":"Search",onChange:function(e){!function(e){var t=e.target.value;s(t),o(t)}(e)}})]})},Me=n(55),Ye=n.n(Me),$e=function(e){var t=e.filterHandler,n=e.textValue,r=Object(a.useState)(0),c=Object(je.a)(r,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){o(0)}),[n]),Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)("select",{className:Fe()("form-select",Ye.a.priceSelect),value:s,onChange:function(e){!function(e){o(e.target.value),t(e.target.value)}(e)},children:[Object(ce.jsx)("option",{defaultValue:!0,value:"0",children:"Price"}),Object(ce.jsx)("option",{value:"1",children:" < 25"}),Object(ce.jsx)("option",{value:"2",children:"25 - 50"}),Object(ce.jsx)("option",{value:"3",children:"50 +"})]})})};$e.defaultProps={textValue:""};var Ze=$e,et=n(35),tt=n.n(et),nt=function(){var e=Object(i.b)(),t=Object(i.c)(Le),n=Object(i.c)(De),r=Object(i.c)(Ae),c=Object(i.c)(Ge),s=Object(i.c)(Re),o=Object(a.useState)(!1),l=Object(je.a)(o,2),u=l[0],d=l[1];Object(a.useEffect)((function(){r&&e(Oe({title:r}))}),[r]);var j=c||t;return Object(a.useEffect)((function(){e(function(){var e=Object(he.a)(me.a.mark((function e(t,n){var a,r,c,s;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O}),e.prev=1,a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Ee.getData(Ne,c);case 6:s=e.sent,t(Te(s)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t((o=e.t0,{type:m,payload:o.response&&o.response.data.message?o.response.data.message:o.message}));case 13:case"end":return e.stop()}var o}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]),n?Object(ce.jsx)(Ke,{}):Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsxs)("div",{className:tt.a.boxGroup,children:[Object(ce.jsx)(ze,{submitSearchHandler:function(t){d(!0),e(function(e){return{type:h,payload:e.trim()}}(t)),setTimeout((function(){d(!1)}),300)}}),Object(ce.jsx)(Ze,{filterHandler:function(t){d(!0),e(we(t)),setTimeout((function(){d(!1)}),300)},textValue:s})]}),u?Object(ce.jsx)(Ke,{}):Object(ce.jsx)("div",{className:tt.a.booksWrapper,children:j&&j.length>0?j.map((function(e){return Object(ce.jsx)(qe,{id:e.id,title:e.title,author:e.author,price:e.price,cover:e.cover},e.id)})):j&&Object(ce.jsx)("h5",{children:"Books Not found..."})})]})})},at=function(e){return e.cart.cartItems},rt=function(e){return e.cart.loading},ct=function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)},st=function(e){return Number(e.price*e.quantity).toFixed(2)},ot=n(36),it=n.n(ot),lt=function(e){var t=e.cartItems,n=ct(t);return Object(ce.jsxs)("div",{className:it.a.cartTable,children:[Object(ce.jsxs)("table",{className:"table table-striped table-bordered mt-3",children:[Object(ce.jsx)("thead",{children:Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Name"}),Object(ce.jsx)("th",{children:"Count"}),Object(ce.jsx)("th",{children:"Price"}),Object(ce.jsx)("th",{children:"Total"})]})}),Object(ce.jsx)("tbody",{children:t.map((function(e){return Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("td",{children:e.title}),Object(ce.jsxs)("td",{children:[" ",e.quantity]}),Object(ce.jsxs)("td",{children:[" ",e.price]}),Object(ce.jsx)("td",{children:st(e)})]},e.id)}))})]}),Object(ce.jsxs)("div",{className:it.a.totalPriceInfo,children:["Total Price: ",n," $"]})]})},ut=function(e){var t=e.title,n=e.disabled,r=e.extraClassName,c=e.onClick,s=Object(a.useMemo)((function(){return Fe()("btn",r,{"btn-disabled":n})}),[n,r]);return Object(ce.jsx)("button",{type:"button",disabled:n,className:s,onClick:c,children:t})};ut.defaultProps={title:"Button",disabled:!1,extraClassName:"btn"};var dt=ut,jt=function(e){return e.modal.open},bt=n(16),pt=n.n(bt),Ot=n(56),ft=n.n(Ot),mt=function(e){var t=e.children,n=e.className,r=void 0===n?"root-portal":n,s=e.el,o=void 0===s?"div":s,i=Object(a.useState)(document.createElement(o)),l=Object(je.a)(i,1)[0];return l.classList.add(r),Object(a.useEffect)((function(){return document.body.appendChild(l),l.setAttribute("class",ft.a.wrapper),document.body.style.overflow="hidden",function(){document.body.removeChild(l),document.body.style.overflow="auto"}}),[l]),Object(c.createPortal)(t,l)};mt.propTypes={el:pt.a.string,className:pt.a.string,children:pt.a.element.isRequired};var ht=mt,xt=n(25),vt=n.n(xt),yt=function(e){var t=e.title,n=e.children;return Object(ce.jsxs)("div",{className:vt.a.wrapper,children:[Object(ce.jsx)("div",{className:vt.a.wrapperHeader,children:Object(ce.jsx)("h4",{className:vt.a.title,children:t})}),Object(ce.jsx)("div",{className:vt.a.wrapperChildren,children:n})]})},gt=n(57),_t=n.n(gt),kt=function(e){var t=e.title,n=e.cartItems,a=e.closeHandler;return Object(ce.jsx)(ht,{children:Object(ce.jsxs)(yt,{title:t,children:[Object(ce.jsx)(lt,{cartItems:n}),Object(ce.jsx)("div",{className:_t.a.buttonGroup,children:Object(ce.jsx)(dt,{title:"Close",extraClassName:"btn-secondary",onClick:a})})]})})},Nt=function(e){return function(t,n){t({type:k}),setTimeout((function(){t(function(e){return{type:N,payload:e}}(e)),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems))}),500)}},St=function(){return function(e){e({type:S}),localStorage.removeItem("cartItems")}},Ct=function(){return{type:D}},Et=function(e){return e.order.message},It=function(e){return e.order.loading},Tt=function(e){return e.order.error},wt=n(37),Bt=n.n(wt),Lt=function(){var e=Object(de.g)(),t=Object(i.b)(),n=Object(i.c)(jt),r=Object(i.c)(at),c=Object(i.c)(Et),s=Object(i.c)(It),o=Object(i.c)(Tt),l=Object(a.useState)(!1),u=Object(je.a)(l,2),d=u[0],j=u[1];Object(a.useEffect)((function(){o&&!s&&t(Oe({title:o}))}),[o,s]),Object(a.useEffect)((function(){j(!0),setTimeout((function(){j(!1)}),500)}),[]);if(c&&t({type:I}),s||d)return Object(ce.jsx)(Ke,{});return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsxs)("div",{className:Bt.a.btnWrapper,children:[Object(ce.jsx)(dt,{title:"Go back",extraClassName:"btn-info",onClick:function(){return e.goBack()}}),Object(ce.jsx)(dt,{title:"Purchase",disabled:0===r.length,extraClassName:"btn-info",onClick:function(){var e;t((e=r,function(){var t=Object(he.a)(me.a.mark((function t(n,a){var r,c,s,o,i;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:L}),t.prev=1,r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},o={books:e},t.next=7,Ee.postData(Se,o,s);case 7:i=t.sent,n((u=i.message,{type:R,payload:u})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n((l=t.t0,{type:G,payload:l.response&&l.response.data.message?l.response.data.message:l.message}));case 14:case"end":return t.stop()}var l,u}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}())),t(Be())}})]}),r.length>0?Object(ce.jsx)(lt,{cartItems:r}):Object(ce.jsxs)("div",{className:Bt.a.cartWrapper,children:[Object(ce.jsx)("i",{className:"fa fa-shopping-cart text-info"}),Object(ce.jsx)("h5",{children:"Cart is empty"})]})]}),n&&Object(ce.jsx)(kt,{title:c,cartItems:r,closeHandler:function(){t(St()),t({type:T}),t(Ct()),e.push("/")}})]})},Rt=function(e){return{type:X,payload:e}},Gt=function(e){return e.currentBook.book},Dt=function(e){return e.currentBook.loading},At=function(e){return e.currentBook.error},Ut=function(e,t){return!!(e>=0&&e<=t)},Ft=function(e,t){return e>t},Pt=n(17),Wt=n.n(Pt),qt=function(e){var t=e.countInStock,n=e.price,r=e.quantity,c=e.onAddToCartClick,s=Object(a.useState)(r),o=Object(je.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(""),d=Object(je.a)(u,2),j=d[0],b=d[1],p=Object(a.useState)(st({price:n,quantity:r})),O=Object(je.a)(p,2),f=O[0],m=O[1];return Object(ce.jsxs)("div",{className:Wt.a.addCountWrapper,children:[j&&Object(ce.jsx)("span",{className:"text-danger mb-3 d-block",title:"errorDivTest",children:j}),Object(ce.jsxs)("div",{className:Wt.a.fieldGroup,children:[Object(ce.jsx)("span",{children:"Price, $ "}),Object(ce.jsx)("span",{children:n})]}),Object(ce.jsxs)("div",{className:Wt.a.fieldGroup,children:[Object(ce.jsx)("span",{children:" Count"}),Object(ce.jsxs)("div",{className:Wt.a.inputGroup,children:[Object(ce.jsx)("input",{value:"-",className:Fe()("btn btn-info",Wt.a.countBtn),onClick:function(){i>0&&(l(i-1),m(st({price:n,quantity:i-1})));b("")},type:"button"}),Object(ce.jsx)("input",{type:"text",value:i,onChange:function(e){var a=+e.target.value;Ut(a,t)&&(l(a),m(st({price:n,quantity:a})),b(""));Ft(a,t)&&b("We have only ".concat(t," books in stock"))},title:"priceInputTest"}),Object(ce.jsx)("input",{value:"+",className:Fe()("btn btn-info",Wt.a.countBtn),onClick:function(e){return Ft(i+1,t)&&b("We have only ".concat(t," books in stock")),void(Ut(i+1,t)&&(l(i+1),m(st({price:n,quantity:i+1}))))},title:"incrementBtn",type:"button"})]})]}),Object(ce.jsxs)("div",{className:Wt.a.fieldGroup,children:[Object(ce.jsx)("span",{children:"Total Price, $"}),Object(ce.jsx)("span",{title:"totalPriceTest",children:f})]}),Object(ce.jsx)("div",{className:Wt.a.buttonGroup,children:Object(ce.jsx)("input",{value:"Add To Cart",className:"btn btn-info",onClick:function(){return c(i)},disabled:0===i,title:"addToCartBtn",type:"button"})})]})};qt.defaultProps={quantity:0};var Vt=qt,Ht=n(21),Kt=n.n(Ht),Qt=function(e){var t=e.book;return Object(ce.jsxs)("div",{className:Kt.a.cardStyle,children:[Object(ce.jsxs)("div",{className:Kt.a.cardDesc,children:[Object(ce.jsx)("img",{className:Kt.a.cardImage,src:t.cover,alt:"Card cap"}),Object(ce.jsx)("p",{className:Kt.a.cardText,children:t.description})]}),Object(ce.jsxs)("div",{className:Fe()("card-body",Kt.a.cardBodyStyle),children:[Object(ce.jsx)("h5",{className:"card-title",children:t.title}),Object(ce.jsx)("p",{className:"card-text",children:t.author}),Object(ce.jsxs)("p",{children:[Object(ce.jsx)("i",{className:"fa fa-tags mr-2"}),t.tags.join(", ")]})]})]})},Xt=n(58),Jt=n.n(Xt),zt=function(){var e=Object(i.b)(),t=Object(de.g)(),n=Object(de.i)(),r=Object(i.c)(Dt),c=Object(i.c)(At),s=Object(i.c)(Gt),o=Object(i.c)(rt),l=Object(i.c)(at),u=l&&s&&l.find((function(e){return e.id===s.id}));Object(a.useEffect)((function(){var t;e((t=n.id,function(){var e=Object(he.a)(me.a.mark((function e(n,a){var r,c,s,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:Q}),e.prev=1,r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Ee.getDataById(Ne,t,s);case 6:o=e.sent,n(Rt(o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n((i=e.t0,{type:J,payload:i.response&&i.response.data.message?i.response.data.message:i.message}));case 13:case"end":return e.stop()}var i}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()))}),[]),Object(a.useEffect)((function(){c&&e(Oe({title:c}))}),[c]);return r?Object(ce.jsx)(Ke,{}):s&&Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsx)(dt,{title:"Go back",extraClassName:"btn-info",onClick:function(){return t.goBack()}}),Object(ce.jsxs)("div",{className:Jt.a.bookDetailsWrapper,children:[Object(ce.jsx)(Qt,{book:s}),Object(ce.jsx)(ce.Fragment,{children:o?Object(ce.jsx)(Ke,{}):Object(ce.jsx)(Vt,{countInStock:s.count,price:s.price,quantity:u&&u.quantity,onAddToCartClick:function(t){e(Nt(Object(p.a)(Object(p.a)({},s),{},{quantity:t}))),setTimeout((function(){e(Oe({title:"Your order successfully added to the cart!",type:"success"}))}),500)}})})]})]})})},Mt=n.p+"static/media/cat.37830ce8.jfif",Yt=n(38),$t=n.n(Yt),Zt=function(){var e=Object(de.g)();return Object(ce.jsxs)("div",{className:$t.a.errorTemplate,children:[Object(ce.jsx)("img",{src:Mt,alt:"Not found",className:$t.a.imageStyle}),Object(ce.jsx)("h1",{children:"404"}),Object(ce.jsx)("h3",{children:"Sorry, that page does not exist"}),Object(ce.jsx)(dt,{title:"Take me home",extraClassName:"btn-info mt-3",onClick:function(){e.push("/")}})]})},en=n.p+"static/media/login_pic.38f6836f.jpg",tn=function(e){return e.length<4||e.length>16},nn=n(39),an=n.n(nn),rn=function(e){var t=e.onLoginSubmit,n=Object(a.useState)(""),r=Object(je.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),i=Object(je.a)(o,2),l=i[0],u=i[1];return Object(ce.jsx)("div",{className:"container",children:Object(ce.jsx)("div",{className:an.a.formContainer,children:Object(ce.jsxs)("form",{onSubmit:function(e){e.preventDefault(),tn(c)?u(!0):(t(c),s(""),u(!1))},children:[" ",Object(ce.jsx)("img",{src:en,alt:"Login avatar",className:an.a.picLogin}),Object(ce.jsxs)("h4",{className:"text-center",children:[Object(ce.jsx)("span",{className:"text-info",children:"JS Band"})," Store"]}),Object(ce.jsx)("div",{className:"form-group",children:Object(ce.jsxs)("label",{htmlFor:"username",className:"w-100",children:["Name",Object(ce.jsx)("input",{type:"text",name:"username",id:"username",value:c,className:"form-control w-100",onChange:function(e){return s(e.target.value)},title:"loginInputTest"}),l&&Object(ce.jsx)("small",{className:"text-danger",title:"errorTitleForTest",children:"Username is not valid"})]})}),Object(ce.jsx)("input",{type:"submit",value:"Login",className:"btn btn-block btn-info",title:"LoginSubmitButton"})]})})})},cn=function(e){return{type:P,payload:e}},sn=function(e){return function(){var t=Object(he.a)(me.a.mark((function t(n){var a,r;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:F}),t.prev=1,a={username:e},t.next=5,Ee.postData(ke,a);case 5:r=t.sent,n(cn(r)),localStorage.setItem("userInfo",JSON.stringify(r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n((c=t.t0,{type:W,payload:c.response&&c.response.data.message?c.response.data.message:c.message}));case 13:case"end":return t.stop()}var c}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},on=function(){return function(e){e({type:V}),setTimeout((function(){localStorage.removeItem("userInfo"),e({type:q})}),500)}},ln=function(){var e=Object(i.b)(),t=Object(de.g)(),n=Object(i.c)(ne),r=Object(i.c)(ae),c=Object(i.c)(re);Object(a.useEffect)((function(){n&&t.push("/")}),[t,n,sn,c]),Object(a.useEffect)((function(){c&&e(Oe({title:c}))}),[c]);return r?Object(ce.jsx)(Ke,{}):Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(rn,{onLoginSubmit:function(t){e(sn(t))}})})},un=n(40),dn=n.n(un),jn=function(e){var t=e.avatar,n=e.username,a=e.onLogoutClicked,r=e.cartItemsSum,c=void 0===r?0:r;return Object(ce.jsxs)("header",{children:[Object(ce.jsx)("nav",{className:"navbar  navbar-expand-lg ",children:Object(ce.jsx)("div",{className:"container",children:Object(ce.jsxs)("div",{className:dn.a.navbarItem,children:[Object(ce.jsx)("span",{children:n}),Object(ce.jsx)("img",{src:t,alt:"avatar",className:dn.a.avatarImage}),Object(ce.jsx)(dt,{title:"Sign Out",extraClassName:"btn-secondary py-2 ml-3",onClick:function(){return a()}})]})})}),Object(ce.jsx)("div",{className:"navbar navbar-dark bg-info navbar-expand-lg mb-3 py-3",children:Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsxs)(o.b,{to:"/",children:[Object(ce.jsx)("i",{className:"fa fa-book"})," JS Band Store"]}),Object(ce.jsxs)(o.b,{to:"/cart",children:[Object(ce.jsx)("i",{className:"fa fa-shopping-cart"})," Cart (",c,")"]})]})})]})},bn=function(e){return e.reduce((function(e,t){return e+t.quantity}),0)},pn=function(){var e=Object(i.b)(),t=Object(i.c)(ne),n=Object(de.g)(),a=Object(i.c)(at),r=bn(a);return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(jn,{username:t.username,avatar:t.avatar,onLogoutClicked:function(){e(on()),e(Ct()),e(Be()),n.push("/login")},cartItemsSum:r})})},On=Object.freeze({books:"/",book:"/books/:id",login:"/login",cart:"/cart",notFound:"*"}),fn=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(de.d,{children:[Object(ce.jsx)(de.b,{exact:!0,path:"/404",component:Zt}),Object(ce.jsxs)(de.b,{children:[Object(ce.jsx)(pn,{}),Object(ce.jsxs)(de.d,{children:[Object(ce.jsx)(de.b,{exact:!0,path:On.books,component:nt}),Object(ce.jsx)(de.b,{path:On.login,component:ln}),Object(ce.jsx)(de.b,{path:On.book,component:zt}),Object(ce.jsx)(de.b,{path:On.cart,component:Lt}),Object(ce.jsx)(de.a,{to:"/404"})]})]})]})})},mn=function(){var e=Object(de.h)().pathname;return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(de.d,{children:[Object(ce.jsx)(de.b,{path:On.login,component:ln}),"/"===e&&Object(ce.jsx)(de.a,{to:On.login}),Object(ce.jsx)(de.b,{path:On.notFound,component:Zt})]})})},hn=function(){var e=Object(i.c)(ne),t=Object(i.c)(ue);return Object(ce.jsxs)(ce.Fragment,{children:[t&&Object(ce.jsx)(le,{title:t.title,type:t.type}),e?Object(ce.jsx)(fn,{}):Object(ce.jsx)(mn,{})]})};n(89);s.a.render(Object(ce.jsx)(r.a.StrictMode,{children:Object(ce.jsx)(i.a,{store:te,children:Object(ce.jsx)(o.a,{children:Object(ce.jsx)(hn,{})})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.56be0edc.chunk.js.map